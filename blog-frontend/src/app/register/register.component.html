<div class="register-container">
  <div class="register-card">
    <div class="register-header">
      <h1>Register</h1>
      <p class="subtitle">Create your account</p>
    </div>

    <!-- form ngForm -->
    <form #f="ngForm" (ngSubmit)="onRegister(f)" class="register-form">

      <!-- USERNAME -->
      <div class="form-group">
        <label for="username">Username</label>

        <input 
          type="text"
          id="username"
          name="username"
          [(ngModel)]="username"
          #u="ngModel"
          placeholder="johndoe"
          required
          minlength="3"
        />

        <!-- Errores -->
        <div *ngIf="u.invalid && u.touched" class="error-message">
          <span *ngIf="u.errors?.['required']">El usuario es obligatorio.</span>
          <span *ngIf="u.errors?.['minlength']">Mínimo 3 caracteres.</span>
        </div>
      </div>


      <!-- EMAIL -->
      <div class="form-group">
        <label for="email">Email</label>

        <input 
          type="email"
          id="email"
          name="email"
          [(ngModel)]="email"
          #e="ngModel"
          placeholder="correo@ejemplo.com"
          required
          email
        />

        <div *ngIf="e.invalid && e.touched" class="error-message">
          <span *ngIf="e.errors?.['required']">El email es obligatorio.</span>
          <span *ngIf="e.errors?.['email']">Debe ser un email válido.</span>
        </div>
      </div>


      <!-- PASSWORD -->
      <div class="form-group">
        <label for="password">Password</label>

        <input 
          type="password"
          id="password"
          name="password"
          [(ngModel)]="password"
          #p="ngModel"
          placeholder="••••••••"
          required
          minlength="8"
          pattern="^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[\W_]).+$"
        />

        <div *ngIf="p.invalid && p.touched" class="error-message">
          <span *ngIf="p.errors?.['required']">La contraseña es obligatoria.</span>
          <span *ngIf="p.errors?.['minlength']">Debe tener al menos 8 caracteres.</span>
          <span *ngIf="p.errors?.['pattern']">
            Debe incluir mayúscula, minúscula, número y símbolo.
          </span>
        </div>
      </div>


      <!-- Error general (email ya usado, etc.) -->
      <div *ngIf="error" class="error-message">
        {{ error }}
      </div>


      <!-- BOTÓN -->
      <button 
        type="submit"
        class="register-button"
        [disabled]="f.invalid"
      >
        SIGN UP
      </button>

      <div class="login-redirect">
        Already have an account? <a href="/login">Sign in</a>
      </div>
    </form>
  </div>
</div>
