<div class="login-container">
  <div class="login-card" [class.shake]="error">
    
    <div class="login-header">
      <h1>Login</h1>
    </div>

    <form (ngSubmit)="onLogin(f)" #f="ngForm" class="login-form">

      <!-- EMAIL -->
      <div class="form-group">
        <label for="email">Email</label>

        <input 
          type="email" 
          id="email"
          [(ngModel)]="email" 
          name="email"
          #e="ngModel"
          required
          email
          placeholder="correo@ejemplo.com"
        >

        <div *ngIf="e.invalid && e.touched" class="error-message">
          <span *ngIf="e.errors?.['required']">El email es obligatorio.</span>
          <span *ngIf="e.errors?.['email']">Debes ingresar un email vÃ¡lido.</span>
        </div>
      </div>

      <!-- PASSWORD -->
      <div class="form-group">
        <label for="password">Password</label>

        <div class="password-wrapper">
          <input 
            [type]="showPassword ? 'text' : 'password'"
            id="password"
            [(ngModel)]="password" 
            name="password"
            #p="ngModel"
            required
            minlength="8"
            placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
          >

          <span class="toggle-password" (click)="showPassword = !showPassword">
            {{ showPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
          </span>  
        </div><!-- ğŸ‘ Mostrar/Ocultar -->
        

        <a href="#" class="forgot-link">Forgot?</a>

        <div *ngIf="p.invalid && p.touched" class="error-message">
          <span *ngIf="p.errors?.['required']">La contraseÃ±a es obligatoria.</span>
          <span *ngIf="p.errors?.['minlength']">Debe tener al menos 8 caracteres.</span>
        </div>
      </div>

      <!-- ERROR GENERAL -->
      <div *ngIf="error" class="error-message">
        {{ error }}
      </div>

      <div class="register-redirect">
        First time here? <a href="/register">Sign up</a>
      </div>

      <!-- BOTÃ“N CON SPINNER -->
      <button 
        type="submit" 
        class="login-button"
        [disabled]="f.invalid || loading"
      >
        <ng-container *ngIf="!loading">SIGN IN</ng-container>

        <ng-container *ngIf="loading">
          <div class="spinner"></div> Iniciandoâ€¦
        </ng-container>
      </button>

    </form>
  </div>
</div>
